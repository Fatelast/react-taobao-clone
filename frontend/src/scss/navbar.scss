// 统一圆角变量
$radius-promax: 24px;

// --- 导航栏搜索中心 UIUXPROMAX 极智设计 ---
.search-promax-container {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  height: 42px;
  background: rgba(255, 255, 255, 0.35);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: $radius-promax;
  padding: 0 16px;
  transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
  box-shadow: 
    0 4px 15px rgba(0, 0, 0, 0.03),
    inset 0 0 0 1px rgba(255, 255, 255, 0.2);

  &:hover {
    background: rgba(255, 255, 255, 0.55);
    border-color: rgba(255, 255, 255, 0.8);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
  }

  // 聚焦时的极致扩张与光晕
  &:focus-within {
    width: 110%; // 略微增长
    transform: translateX(-4.5%); // 配合宽度增长保持绝对中心
    background: #fff;
    border-color: #ff6a00;
    box-shadow: 
      0 10px 30px rgba(255, 106, 0, 0.15),
      0 0 0 4px rgba(255, 106, 0, 0.05);
    
    .search-icon-left {
      color: #ff6a00;
      transform: scale(1.1);
    }
  }

  .search-icon-left {
    font-size: 16px;
    color: #999;
    transition: all 0.3s ease;
    margin-right: 12px;
  }

  .search-promax-input {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    font-size: 14px;
    font-weight: 500;
    color: #333;
    padding-right: 45px; // 为右侧按钮留空

    &::placeholder {
      color: #bbb;
      letter-spacing: 0.05em;
    }
  }

  // 右侧极简搜索按钮
  .search-btn-right {
    position: absolute;
    right: 4px;
    top: 4px;
    bottom: 4px;
    width: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #ff9000 0%, #ff5000 100%);
    color: #fff;
    border-radius: 18px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    box-shadow: 0 4px 10px rgba(255, 80, 0, 0.2);

    &:hover {
      transform: scale(1.05);
      filter: brightness(1.1);
      box-shadow: 0 6px 15px rgba(255, 80, 0, 0.3);
    }

    &:active {
      transform: scale(0.95);
    }
  }
}

// 会员头像光环 UIUXPROMAX 几何校准与极智细节样式
.membership-avatar-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  gap: 14px; // 略微增加间距，舒缓视觉压力
  padding: 4px 18px;
  height: 64px;
  transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
  cursor: pointer;

  &:hover {
    // transform: translateX(6px); // 增强横向动态感
    // .tier-text {
    //   letter-spacing: 0.25em;
    //   filter: brightness(1.15);
    // }
  }

  // --- 1. 左侧识别文字：极智字体设计 ---
  .tier-text {
    font-size: 11px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.12em;
    user-select: none;
    transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
    white-space: nowrap;
    line-height: 1;
    
    &.basic-text { color: #acacac; font-weight: 700; }

    &.pro-text {
      background: linear-gradient(90deg, #ff6a00, #ee0979, #ff6a00);
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shine-text 3s linear infinite;
      text-shadow: 0 0 10px rgba(255, 106, 0, 0.2);
    }

    &.ultra-text {
      background: linear-gradient(
        to right,
        #bf953f,
        #fcf6ba 25%,
        #b38728 50%,
        #fbf5b7 75%,
        #aa771c
      );
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shine-text 4s linear infinite;
      filter: drop-shadow(0 0 2px rgba(185, 147, 54, 0.4));
    }
  }

  // --- 2. 几何校准核心：绝对圆形锚点 ---
  .avatar-aura-anchor {
    position: relative;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0; // 防止文字拉伸导致的长椭圆变形
  }

  .avatar-inner {
    position: relative;
    z-index: 5;
    width: 30px !important;
    height: 30px !important;
    min-width: 30px !important;
    min-height: 30px !important;
    border-radius: 50% !important;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    padding: 0;
    box-shadow: 0 3px 12px rgba(0,0,0,0.08);
    overflow: hidden; // 确保内部 Avatar 不溢出

    .ant-avatar {
      width: 100% !important;
      height: 100% !important;
      aspect-ratio: 1 / 1 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      border-radius: 50% !important;
      
      img {
        object-fit: cover !important;
      }
    }
  }

  // 基础光环层
  .halo-ring {
    position: absolute;
    inset: 0;
    border-radius: 50%;
    z-index: 1;
    pointer-events: none;
  }

  // ---------- Pro 等级：多重同心增强波纹 ----------
  &.tier-pro {
    .halo-ring {
      box-shadow: 0 0 15px rgba(255, 106, 0, 0.25);
      
      &::before, &::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 50%;
        border: 1.5px solid rgba(255, 106, 0, 0.5);
      }

      &::before {
        animation: pro-ripple-main 2.5s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
      }

      &::after {
        animation: pro-ripple-sub 2.5s cubic-bezier(0.165, 0.84, 0.44, 1) infinite 1.25s;
        border-color: rgba(235, 12, 112, 0.4);
      }
    }
  }

  // ---------- Ultra 等级：玄金流金与粒子光场 ----------
  &.tier-ultra {
    .halo-ring {
      border: 1px solid rgba(255, 215, 0, 0.15);
      overflow: hidden;

      &::before {
        content: "";
        position: absolute;
        inset: -50%;
        background: conic-gradient(
          from 0deg,
          transparent,
          rgba(255, 215, 0, 0.95) 10%, 
          transparent 20%
        );
        animation: ultra-rotate 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
      }

      &::after {
        content: "";
        position: absolute;
        inset: 1.5px;
        background: #fff;
        border-radius: 50%;
        z-index: 4;
      }
    }

    // 氛围粒子脉冲
    &::before {
      content: "";
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 215, 0, 0.2) 0%, transparent 70%);
      animation: ultra-ambient-breath 3.5s ease-in-out infinite;
      z-index: 0;
    }
  }
}

// ---------- 核心动画定义 ----------

@keyframes shine-text {
  to { background-position: 200% center; }
}

@keyframes pro-ripple-main {
  0% { transform: scale(1); opacity: 0.8; }
  100% { transform: scale(1.6); opacity: 0; }
}

@keyframes pro-ripple-sub {
  0% { transform: scale(1); opacity: 0.6; }
  100% { transform: scale(1.4); opacity: 0; }
}

@keyframes ultra-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes ultra-ambient-breath {
  0%, 100% { transform: scale(0.8); opacity: 0.2; }
  50% { transform: scale(1.25); opacity: 0.6; }
}
